# 🔍 Gap Foundry

> **창업 아이디어 시장검증을 AI가 자동으로 해주는 도구**

"이 아이디어 해볼까?" 고민될 때, 경쟁사 분석부터 포지셔닝까지 **15~25분 만에** 자동으로 검증해줍니다.

---

## 🎯 이런 분들께 추천해요

- 💡 **창업 아이디어가 있는데**, 시장조사하기 귀찮은 분
- 🤔 **"이거 진짜 되나?"** 빠르게 확인하고 싶은 분  
- 📊 **경쟁사 분석**을 체계적으로 하고 싶은 PM/기획자
- ⏰ 시간은 없는데 **Go/No-Go 판단**이 필요한 분

---

## ✨ 뭘 해주나요?

| 단계 | 하는 일 | 결과물 |
|------|---------|--------|
| 1️⃣ | **경쟁사 발굴** | 직접/간접 경쟁사 15개+ 리스트 |
| 2️⃣ | **채널/메시지 분석** | 경쟁사들이 어디서 뭐라고 말하는지 |
| 3️⃣ | **가치제안 분석** | 경쟁사들의 핵심 약속/USP |
| 4️⃣ | **빈틈 발굴** | 시장에서 아직 안 채워진 기회 |
| 5️⃣ | **포지셔닝 설계** | 우리만의 관점(POV) + 차별화 전략 |
| 6️⃣ | **Landing Gate 검토** | 🟢 GO / 🟡 HOLD / 🔴 NO 판정 |
| 7️⃣ | **최종 리포트** | 다음 액션 + 실행 플랜 |

---

## 🚦 Landing Gate란?

기존의 "사업성 판단"이 아닌, **"지금 랜딩페이지 + 광고 실험을 해볼 가치가 있는가?"**를 판정합니다.

### 5가지 핵심 질문

1. 이 아이디어는 **특정 상황의 특정 사람**을 떠올리게 하는가?
2. 그 사람은 **이미 불편**하다고 느끼고 있는가?
3. 기존 대안에 대해 **짜증/아쉬움/불만**이 있는가?
4. 이걸 **한 문장 카피**로 말할 수 있는가?
5. 이 카피를 보면 **"어? 그게 돼?"**라는 반응이 나올 수 있는가?

### 판정 결과

| 결과 | YES 개수 | 의미 | 다음 액션 |
|------|----------|------|-----------|
| 🟢 **LANDING_GO** | 4~5개 | 광고 실험 준비 완료 | 7일 실행 플랜 제공 |
| 🟡 **LANDING_HOLD** | 2~3개 | 포커싱 필요 | 수정 가이드 + 포커싱 옵션 |
| 🔴 **LANDING_NO** | 0~1개 | 현재 부적합 | 대안 접근법 제안 |

> ⚠️ **LANDING_NO ≠ 사업 실패**  
> "지금 광고 실험에는 안 맞다"는 것이지, 아이디어 자체가 틀린 게 아닙니다.

---

## 🚀 시작하기 (5분)

### 1. 필요한 것

- Python 3.10 이상
- OpenAI API 키 ([여기서 발급](https://platform.openai.com/api-keys))
- Serper API 키 ([여기서 발급](https://serper.dev/) - 무료 2,500회)

### 2. 설치

```bash
# 프로젝트 다운로드
git clone https://github.com/your-repo/gap_foundry.git
cd gap_foundry

# 의존성 설치
pip install -e .
```

### 3. API 키 설정

`.env` 파일을 만들고 아래 내용을 입력하세요:

```bash
OPENAI_API_KEY=sk-xxxxxxxxxxxxx
SERPER_API_KEY=xxxxxxxxxxxxx
```

---

## 📖 사용법

### 🔰 가장 쉬운 방법: 대화형 인터뷰

```bash
python3 -m gap_foundry.main --refine
```

**AI가 인터뷰어처럼 아이디어를 이해하려고 노력합니다:**

```
🎯 Gap Foundry - 아이디어 인터뷰
════════════════════════════════════════════════════════════
아이디어를 자유롭게 이야기해주세요.
저는 먼저 이해하려고 노력할게요 😊

📝 입력: 의사가 환자를 관리하는 CRM 서비스

🤖 아, 의사가 환자 한 분 한 분의 건강 상태뿐 아니라 개인적인 취향이나 
   성향까지 고려해서 더 맞춤형으로 케어할 수 있는 시스템이군요! 
   혹시 이 아이디어는 직접 경험에서 나온 건가요? 🤔

📝 입력: 응 난 치과의사야

──────────────────────────────────────────────────────────
✅ 아이디어가 충분히 이해됐어요!
──────────────────────────────────────────────────────────

📝 입력: done

📋 시장 검증 INPUT 최종 확인
════════════════════════════════════════════════════════════
💡 아이디어: 의사가 환자를 관리하는 CRM 서비스
👥 타깃 고객: 의사(의료기관 종사자)
🎯 해결할 문제: 환자 성향/취향 파악 어려움
🔄 현재 대안: 기존 CRM (추정)
🌍 시장: KR
💼 비즈니스 유형: B2B
════════════════════════════════════════════════════════════
```

**특징:**
- ❌ 직접 질문 안 함 ("타깃 고객이 누구인가요?" 같은)
- ✅ 해석 제안 ("~인 것 같아요. 맞나요?")
- ✅ 종료 시점은 사용자가 결정 (`done`)
- ✅ 마지막에 수정 가능

---

### 📝 CLI로 바로 실행

```bash
python3 -m gap_foundry.main \
  --idea "고객 인터뷰 자동 요약 툴" \
  --target "초기 창업가/PM" \
  --problem "인터뷰 정리에 시간이 너무 오래 걸린다" \
  --alternatives "Notion, Google Docs, Dovetail, 엑셀" \
  --geo KR \
  --type B2B \
  --out outputs/my_report.md
```

### 📁 JSON 파일로 실행

`input.json` 파일 생성:

```json
{
  "idea_one_liner": "고객 인터뷰 자동 요약 툴",
  "target_customer": "초기 창업가/PM",
  "problem_statement": "인터뷰 정리에 시간이 너무 오래 걸린다",
  "current_alternatives": "Notion, Google Docs, Dovetail, 엑셀",
  "geo_market": "KR",
  "business_type": "B2B"
}
```

```bash
python3 -m gap_foundry.main --input input.json
```

---

## 🔄 자동 수정 모드 (--auto-revise)

Landing Gate가 **LANDING_HOLD** 판정을 내리면, **자동으로 포지셔닝을 수정**합니다:

```bash
python3 -m gap_foundry.main --refine --auto-revise
```

### 2-Stage 실행 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                    🔄 --auto-revise 모드                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ═══════════════════════════════════════════════════════════════   │
│  Stage A: Landing Gate 판정 생성                                   │
│  ═══════════════════════════════════════════════════════════════   │
│                                                                     │
│  Pass 1: 리서치 + POV + Landing Gate 판정                          │
│    경쟁사 → 채널 → VP → 빈틈 → POV → Red Team                      │
│              │                                                      │
│              ▼                                                      │
│         verdict 추출                                               │
│              │                                                      │
│    ┌─────────┼─────────┬─────────┐                                 │
│    ▼         ▼         ▼         ▼                                 │
│   GO       HOLD        NO     UNKNOWN                              │
│    │         │         │         │                                 │
│    │    Pass 2:    (기본:       │                                 │
│    │    Revision    종료)       │                                 │
│    │    revise →   --revise-no │                                 │
│    │    recheck    로 강제     │                                 │
│    │         │     revision    │                                 │
│    │         ▼         │         │                                 │
│    │    verdict_v2     │         │                                 │
│    │         │         │         │                                 │
│    └─────────┴─────────┴─────────┘                                 │
│              │                                                      │
│              ▼                                                      │
│         최종 verdict 확정                                          │
│                                                                     │
│  ═══════════════════════════════════════════════════════════════   │
│  Stage B: 리포트 생성 (verdict를 inputs로 주입!)                   │
│  ═══════════════════════════════════════════════════════════════   │
│                                                                     │
│  final_step1_report                                                │
│    inputs: landing_gate_verdict = "LANDING_XXX"                    │
│              │                                                      │
│              ▼                                                      │
│    verdict를 직접 참조 → 100% 안정적인 리포트 생성                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Revision 정책

| Verdict | 기본 동작 | 이유 |
|---------|----------|------|
| 🟢 **LANDING_GO** | 바로 리포트 | 준비 완료! |
| 🟡 **LANDING_HOLD** | **자동 Revision** | 포커싱하면 GO 가능성 높음 |
| 🔴 **LANDING_NO** | Revision 없이 종료 | 비용 효율 (대부분 안 바뀜) |

> 💡 **NO도 revision 하고 싶다면?** `--revise-no` 옵션 추가

```bash
# HOLD만 revision (기본)
python3 -m gap_foundry.main --refine --auto-revise

# NO도 강제 revision
python3 -m gap_foundry.main --refine --auto-revise --revise-no
```

---

## 💬 후속 대화 모드 (--chat)

리포트가 나온 후, **리포트에 대해 질문하거나 반론(Claim)**을 제기할 수 있습니다:

```bash
python3 -m gap_foundry.main --refine --chat
```

### 사용 예시

```
✅ Final report saved to: outputs/reports/...

============================================================
💬 리포트 후속 대화 모드
============================================================
리포트에 대해 궁금한 점이나 반론이 있으면 자유롭게 말씀하세요.
종료하려면 'quit', 'exit', 또는 '종료'를 입력하세요.
============================================================

📝 나: 근데 경쟁사 분석에서 A회사가 빠진 것 같은데?

🤖 AI: 좋은 지적이에요! 말씀하신 A회사를 확인해보니, 실제로 우리 타깃 세그먼트와
   직접 경쟁 관계에 있을 수 있습니다. 다만 이번 분석에서는 '검색 기반'으로 
   발굴했기 때문에 SEO/광고 노출이 적은 경쟁사는 누락될 수 있어요.

📝 나: 종료
대화를 종료합니다. 감사합니다! 👋
```

---

## 📊 결과물

실행 후 `outputs/` 폴더에 저장됩니다:

```
outputs/
├── reports/                                    # 📋 최종 리포트 모음
│   ├── 2026-01-16_1430_AI이력서자동작성_B2C_report.md
│   └── 2026-01-16_1545_환자관리CRM_B2B_report.md
│
└── runs/                                       # 📂 실행별 상세 결과
    └── 2026-01-16_1430_환자관리CRM_B2B/
        ├── 01_경쟁사_발굴.md      # 🔍 경쟁사 15개 발굴
        ├── 02_경쟁사_압축.md      # 📦 상위 8개로 압축
        ├── 03_채널_분석.md        # 📢 마케팅 채널 분석
        ├── 04_가치제안_추출.md    # 💎 VP/USP 추출
        ├── 05_채널VP_요약.md      # 📋 압축 요약
        ├── 06_빈틈_발굴.md        # 🕳️ Gap Hypotheses
        ├── 07_리서치_요약.md      # 📑 전체 리서치 요약
        ├── 08_POV_포지셔닝.md     # 🎯 POV & 포지셔닝
        ├── 09_레드팀_검토.md      # 🔴 Landing Gate 판정
        ├── 12_최종_리포트.md      # 📊 최종 리포트
        ├── _index.json           # 파일 인덱스
        └── _usage_metrics.json   # 💰 비용 정보
```

---

## 💰 비용 안내

| 모드 | 예상 비용 | 소요 시간 |
|------|----------|----------|
| 기본 실행 | ~$0.80 | 15~25분 |
| Auto-Revise (HOLD 시) | ~$0.90 | +3~5분 |

> 💡 **Revision-only** 덕분에 HOLD 시 추가 비용이 적습니다!

비용은 `_usage_metrics.json`에서 확인할 수 있어요.

---

## 🛠️ 옵션 정리

| 옵션 | 설명 | 예시 |
|------|------|------|
| `--refine` | 대화형 입력 (AI 인터뷰어) | `--refine` |
| `--input` | JSON 파일로 입력 | `--input input.json` |
| `--idea` | 아이디어 한 줄 | `--idea "요약 툴"` |
| `--target` | 타깃 고객 | `--target "PM"` |
| `--problem` | 해결할 문제 | `--problem "시간이 오래 걸림"` |
| `--alternatives` | 현재 대안들 | `--alternatives "Notion, Docs"` |
| `--geo` | 지역 (KR/US/Global) | `--geo KR` |
| `--type` | B2B/B2C/B2B2C | `--type B2B` |
| `--out` | 결과 저장 경로 | `--out report.md` |
| `--auto-revise` | HOLD 시 자동 수정 | `--auto-revise` |
| `--revise-no` | NO도 강제 revision | `--auto-revise --revise-no` |
| `--chat` | 리포트 후 대화 모드 | `--chat` |
| `--dry-run` | 실행 없이 설정 확인 | `--dry-run` |
| `--safe-mode` | 운영급 안전 모드 | `--safe-mode` |

---

## 🏗️ 아키텍처

### 2-Stage 실행 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                        Gap Foundry                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ═══════════════════════════════════════════════════════════════   │
│  Stage A: 판정 생성 (final_report 제외)                            │
│  ═══════════════════════════════════════════════════════════════   │
│                                                                     │
│  [입력] ──→ [8개 AI 에이전트] ──→ [Landing Gate 판정]              │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  🔍 경쟁사 발굴 ──→ 📦 압축 ──→ 📢 채널 분석               │   │
│  │                              ↘                             │   │
│  │                                📋 채널VP 요약              │   │
│  │                              ↙                             │   │
│  │  💎 VP 추출 ──────────────→ 🕳️ 빈틈 발굴                  │   │
│  │                                   ↓                        │   │
│  │                              📑 리서치 요약                │   │
│  │                                   ↓                        │   │
│  │                              🎯 POV/포지셔닝               │   │
│  │                                   ↓                        │   │
│  │                              🔴 Landing Gate 판정          │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                   │                                 │
│              ┌───────────────────┼───────────────────┐             │
│              ▼                   ▼                   ▼             │
│         LANDING_GO         LANDING_HOLD        LANDING_NO          │
│              │                   │                   │             │
│              │              ✏️ Revision              │             │
│              │              (revise → recheck)       │             │
│              │                   │                   │             │
│              └───────────────────┴───────────────────┘             │
│                                   │                                 │
│  ═══════════════════════════════════════════════════════════════   │
│  Stage B: 리포트 생성 (verdict를 inputs로 주입!)                   │
│  ═══════════════════════════════════════════════════════════════   │
│                                   │                                 │
│                              📊 최종 리포트                        │
│                       (GO/HOLD/NO별 맞춤 템플릿)                   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### AI 에이전트 구성

| 에이전트 | 역할 | LLM |
|----------|------|-----|
| 🔍 **Competitor Discovery** | 경쟁사/대체재 발굴 | gpt-4.1 |
| 📢 **Channel Intel** | 채널/메시지 분석 | gpt-4.1 |
| 💎 **VP Extractor** | 가치제안 추출 | gpt-4.1 |
| 📋 **Research Summarizer** | 리서치 요약/압축 | gpt-4.1-mini |
| 🕳️ **Gap Miner** | 빈틈 가설 도출 | gpt-4.1 |
| 🎯 **POV Strategist** | 포지셔닝 설계 | gpt-4.1 |
| 🔴 **Red Team** | Landing Gate 판정 | gpt-4.1 |
| 🎭 **Orchestrator** | 리포트 통합 | gpt-4.1 |

### 핵심 설계 원칙

| 원칙 | 설명 |
|------|------|
| **2-Stage 분리** | Stage A에서 verdict 추출 → Stage B에서 inputs로 주입 (파싱 불안 제거) |
| **Sequential Process** | 각 Task가 자신의 context만 참조 (TPM 안전) |
| **Context 압축** | `summarize_research`, `summarize_channels_vp`가 정보 압축 |
| **Tool 하드리밋** | 웹 스크래핑 800자, 검색 1800자 제한 |
| **HOLD 중심 Revision** | NO는 기본 revision 안 함 (비용 효율) |
| **역할 분리** | Red Team은 새로운 조사 금지, 판정만 |

---

## ⚙️ 환경변수

`.env` 파일에 설정:

```bash
# 필수
OPENAI_API_KEY=sk-xxxxxxxxxxxxx
SERPER_API_KEY=xxxxxxxxxxxxx

# 선택 (기본값 있음)
MAIN_LLM_MODEL=gpt-4.1        # 기본: gpt-4.1
FAST_LLM_MODEL=gpt-4.1-mini   # 기본: gpt-4.1-mini
```

---

## ❓ FAQ

### Q: Landing Gate 판정이란?

**"이 사업이 성공할까?"가 아니라 "지금 랜딩페이지 광고 실험을 해볼 가치가 있는가?"**를 판정합니다.

- 🟢 **GO**: 광고 실험 진행 가능 → 7일 실행 플랜 제공
- 🟡 **HOLD**: 포커싱 필요 → 수정 가이드 제공
- 🔴 **NO**: 현재 광고 부적합 → 대안 접근법 제안

### Q: LANDING_NO가 나오면 포기해야 하나요?

**아니요!** NO는 "사업이 안 된다"가 아니라 "지금 광고로 검증하기엔 준비가 부족하다"는 뜻입니다.

대안:
- 콘텐츠 마케팅 (문제 인식 먼저)
- 커뮤니티 빌딩
- 대기자 리스트 (느린 빌드업)

### Q: API 키는 어디서 발급받나요?

- **OpenAI**: https://platform.openai.com/api-keys
- **Serper** (웹 검색용): https://serper.dev/ (무료 2,500회)

### Q: 비용이 얼마나 드나요?

1회 실행당 약 **$0.80** (한화 1,000원 정도). `_usage_metrics.json`에서 정확한 비용 확인 가능.

### Q: 검색이 안 되는 것 같아요

`SERPER_API_KEY` 설정을 확인하세요. 없으면 AI가 "추측"으로 분석합니다 (품질 저하).

### Q: 입력 필드를 다 채워야 하나요?

**6개 핵심 필드만 필요합니다:**
- idea_one_liner, target_customer, problem_statement
- current_alternatives, geo_market, business_type

---

## 🔧 기술 스택

- **Framework**: [CrewAI](https://docs.crewai.com/) (Multi-Agent Orchestration)
- **LLM**: OpenAI GPT-4.1 / GPT-4.1-mini
- **Search**: [Serper](https://serper.dev/) (Google Search API)
- **Process**: Sequential (TPM 안전, 누적 메모리 문제 해결)
- **Architecture**: 2-Stage (verdict inputs 주입으로 파싱 안정성 100%)

---

## 🤝 문의

이슈나 피드백은 GitHub Issues에 남겨주세요!

---

**Made with ❤️ for founders who validate before they build.**
